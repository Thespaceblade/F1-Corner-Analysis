(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2054:function(e,s,t){Promise.resolve().then(t.bind(t,1286))},1286:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var l=t(9268),n=t(6006);let r=[2025],a=["VER","LEC","NOR","HAM"];function i(e){let{tracks:s,selectedTrack:t,onTrackChangeAction:i}=e,[c,d]=(0,n.useState)(["VER","NOR"]),o=e=>{d(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])};return(0,l.jsxs)("div",{className:"panel p-3 flex flex-col sm:flex-row sm:items-center gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("select",{className:"input-slim min-w-[120px]",value:2025,disabled:!0,children:r.map(e=>(0,l.jsx)("option",{value:e,children:e},e))}),(0,l.jsxs)("select",{className:"input-slim min-w-[240px]",value:t,onChange:e=>i(e.target.value),children:[(0,l.jsx)("option",{value:"",children:"Select Track"}),s.map(e=>(0,l.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,l.jsxs)("select",{className:"input-slim min-w-[120px]",children:[(0,l.jsx)("option",{value:"Q",children:"Qualifying"}),(0,l.jsx)("option",{value:"R",children:"Race"})]})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-end gap-2",children:a.map(e=>(0,l.jsx)("button",{onClick:()=>o(e),className:"chip ".concat(c.includes(e)?"ring-1 ring-accent":""),children:e},e))})]})}function c(e){let{svgFile:s,corners:t}=e,[r,a]=(0,n.useState)(null),[i,c]=(0,n.useState)(null),[d,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(null),[x,h]=(0,n.useState)(!1),p=n.useRef(0);return(0,n.useEffect)(()=>{if(!s)return;let e="/Tracks/".concat(encodeURIComponent(s));a(null),c(null),m(null),o(null),h(!1);let t=new AbortController,l=t.signal,n=++p.current;return fetch(e,{signal:l}).then(async e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));let s=await e.text();if(l.aborted||n!==p.current)return;m(e.status);let t=s.match(/viewBox\s*=\s*"([^"]+)"/)||s.match(/viewBox\s*=\s*'([^']+)'/);if(t&&t[1]){let e=t[1].trim().split(/\s+/).map(Number);4===e.length&&e.every(e=>!Number.isNaN(e))&&n===p.current&&c({minX:e[0],minY:e[1],w:e[2],h:e[3]})}if(n===p.current){let e=s.replace(/<svg([\s\S]*?)>/i,(e,s)=>{let t=s;return/width=/i.test(t)?t=t.replace(/width\s*=\s*(["']).*?\1/i,'width="100%"'):t+=' width="100%"',/height=/i.test(t)?t=t.replace(/height\s*=\s*(["']).*?\1/i,'height="100%"'):t+=' height="100%"',/preserveAspectRatio=/i.test(t)?t=t.replace(/preserveAspectRatio\s*=\s*(["']).*?\1/i,'preserveAspectRatio="xMidYMid meet"'):t+=' preserveAspectRatio="xMidYMid meet"',"<svg".concat(t,">")});a(e)}}).catch(t=>{l.aborted||n!==p.current||(console.error("Failed to load SVG",e,t),o("Failed to load ".concat(s,": ").concat(t.message)),a(null),h(!0))}),()=>{t.abort()}},[s]),(0,n.useEffect)(()=>{r&&h(!0)},[r]),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"subpanel p-3",style:{width:"100%"},children:(0,l.jsxs)("div",{className:"relative",children:[d&&(0,l.jsx)("div",{className:"p-3 mb-2 text-sm text-red-400 bg-red-900/20 rounded",children:d}),null!==u&&(0,l.jsxs)("div",{className:"p-2 mb-2 text-xs text-gray-300",children:["Requested: ",(0,l.jsx)("code",{children:"/Tracks/".concat(s)})," â€” status: ",u]}),(0,l.jsxs)("div",{className:"relative w-full max-w-[460px] mx-auto aspect-square",children:[r&&x?(0,l.jsx)("div",{className:"track-svg absolute inset-0",dangerouslySetInnerHTML:{__html:r}}):(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-800 flex items-center justify-center text-sm text-gray-400",children:"Loading track..."}),i&&(0,l.jsx)("svg",{viewBox:"".concat(i.minX," ").concat(i.minY," ").concat(i.w," ").concat(i.h),preserveAspectRatio:"xMidYMid meet",className:"absolute inset-0 w-full h-full pointer-events-none",children:t.map(e=>(0,l.jsxs)("g",{children:[(0,l.jsx)("circle",{cx:e.x,cy:e.y,r:Math.max(4,.01*Math.min(i.w,i.h)),fill:"slow"===e.type?"#ef4444":"medium"===e.type?"#f59e0b":"#10b981",opacity:.85}),(0,l.jsx)("text",{x:e.x,y:e.y-.02*i.h,fontSize:Math.max(10,Math.round(.03*i.h)),fill:"#ffffff",textAnchor:"middle",children:e.number})]},e.number))})]})]})}),(0,l.jsxs)("div",{className:"mt-2 flex gap-2 justify-center text-sm",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500 opacity-75"}),"Slow"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-yellow-500 opacity-75"}),"Medium"]}),(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500 opacity-75"}),"Fast"]})]})]})}function d(e){let{corners:s,cornerInfo:t}=e;return(0,l.jsx)("div",{children:(0,l.jsxs)("table",{className:"w-full table-auto text-left",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"pb-2",children:"Corner"}),(0,l.jsx)("th",{className:"pb-2",children:"Type"}),(0,l.jsx)("th",{className:"pb-2",children:"Driver A"}),(0,l.jsx)("th",{className:"pb-2",children:"Driver B"}),(0,l.jsx)("th",{className:"pb-2",children:"Winner"}),(0,l.jsx)("th",{className:"pb-2",children:"Delta (s)"})]})}),(0,l.jsx)("tbody",{children:s.map(e=>{var s,n,r,a,i,c;let d=t.find(s=>s.number===e.cornerNumber);return(0,l.jsxs)("tr",{className:"border-t border-[var(--border-clr)]",children:[(0,l.jsx)("td",{className:"py-2",children:e.cornerNumber}),(0,l.jsxs)("td",{className:"py-2",children:[(0,l.jsx)("span",{className:"inline-block w-2 h-2 rounded-full mr-2 bg-".concat((null==d?void 0:d.type)==="slow"?"red":(null==d?void 0:d.type)==="medium"?"yellow":"green","-500")}),null!==(c=null==d?void 0:d.type)&&void 0!==c?c:"unknown"]}),(0,l.jsx)("td",{className:"py-2",children:null===(n=e.driverA)||void 0===n?void 0:null===(s=n.cornerTime)||void 0===s?void 0:s.toFixed(3)}),(0,l.jsx)("td",{className:"py-2",children:null===(a=e.driverB)||void 0===a?void 0:null===(r=a.cornerTime)||void 0===r?void 0:r.toFixed(3)}),(0,l.jsx)("td",{className:"py-2",children:e.winner}),(0,l.jsx)("td",{className:"py-2",children:null===(i=e.delta_s)||void 0===i?void 0:i.toFixed(3)})]},e.cornerNumber)})})]})})}function o(){let[e,s]=(0,n.useState)(""),[t,r]=(0,n.useState)(null);(0,n.useEffect)(()=>{fetch("/data/tracks.json").then(e=>e.json()).then(r)},[]);let[a,o]=(0,n.useState)(null),[u,m]=(0,n.useState)(2025);(0,n.useEffect)(()=>{fetch("/data/calendar2025.json").then(e=>e.json()).then(o)},[]);let x=null==t?void 0:t.tracks[e],h=null==a?void 0:a.rounds.find(s=>s.id===e);if(!t||!a)return(0,l.jsx)("div",{children:"Loading..."});let p=a.rounds.map(e=>({id:e.id,name:e.name}));return(0,l.jsxs)("main",{className:"max-w-6xl mx-auto px-4",children:[(0,l.jsxs)("header",{className:"mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-semibold",children:"F1 Corner Analysis"}),(0,l.jsx)("p",{className:"text-sm text-subtext-clr",children:"inspired by F1Tempo"})]}),(0,l.jsx)(i,{tracks:p,selectedTrack:e,onTrackChangeAction:s}),x&&h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"mt-6 grid lg:grid-cols-2 gap-6",children:[(0,l.jsx)("div",{className:"panel p-4",children:(0,l.jsx)(c,{svgFile:x.svgFile,corners:x.corners})}),(0,l.jsxs)("div",{className:"panel p-4",children:[(0,l.jsx)("div",{className:"text-lg font-bold",children:h.officialName}),(0,l.jsx)("div",{className:"text-gray-600",children:h.date})]})]}),(0,l.jsx)("div",{className:"mt-6 panel p-4",children:(0,l.jsx)(d,{corners:[],cornerInfo:x.corners})})]})]})}},3177:function(e,s,t){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l=t(6006),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(e,s,t){var l,r={},d=null,o=null;for(l in void 0!==t&&(d=""+t),void 0!==s.key&&(d=""+s.key),void 0!==s.ref&&(o=s.ref),s)a.call(s,l)&&!c.hasOwnProperty(l)&&(r[l]=s[l]);if(e&&e.defaultProps)for(l in s=e.defaultProps)void 0===r[l]&&(r[l]=s[l]);return{$$typeof:n,type:e,key:d,ref:o,props:r,_owner:i.current}}s.Fragment=r,s.jsx=d,s.jsxs=d},9268:function(e,s,t){"use strict";e.exports=t(3177)}},function(e){e.O(0,[253,961,744],function(){return e(e.s=2054)}),_N_E=e.O()}]);